<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./test.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="./index.php">
</head>
<body>
	<form>
        <div class="container">
            <h2>Форма для отправки на почту</h2>
            <form id="emailForm">
              <input type="text" id="name" placeholder="Ваше имя" required>
              <input type="email" id="email" placeholder="Ваш Email" required>
              <textarea id="message" placeholder="Сообщение" required></textarea>
              <button type="submit">Отправить</button>
            </form>
            <p id="statusMessage"></p>
          </div>
	<script>
        document.addEventListener('DOMContentLoaded', function() {
  const emailForm = document.getElementById('emailForm');
  const statusMessage = document.getElementById('statusMessage');

  emailForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const message = document.getElementById('message').value;

    // Создаем объект FormData и добавляем поля формы в него.
    const formData = new FormData();
    formData.append('name', name);
    formData.append('email', email);
    formData.append('message', message);

    // Отправляем данные на сервер с помощью AJAX-запроса.
    fetch('https://api.jakubkowalczyk.pl/send/mail', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(data => {
      if (data.status === 'success') {
        statusMessage.textContent = 'Сообщение успешно отправлено.';
        emailForm.reset(); // Очистить форму после успешной отправки.
      } else {
        statusMessage.textContent = 'Ошибка при отправке сообщения. Попробуйте позже.';
      }
    })
    .catch(error => {
      statusMessage.textContent = 'Ошибка при отправке сообщения. Попробуйте позже.';
    });
  });
});

    </script>
</body>
</html>